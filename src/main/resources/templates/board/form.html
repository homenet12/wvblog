<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
    	<meta charset="UTF-8"/>
        <th:block th:replace="fragments/head"></th:block>
        <title>Clean Blog - Start Bootstrap Theme</title>
        <!-- Toast UI Editor -->
		<link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
		<script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    </head>
    <body>
        <!-- Navigation-->
        <th:block th:replace="fragments/nav"></th:block>
        <!-- Page Header-->
        <th:block th:replace="fragments/header"></th:block>
        <!-- Main Content-->
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <form action="/board/save" method="post" id="form">
					<div class="mb-3">
						<label for="" class="form-label">Title</label>
						<input id="title" name="title" type="text" class="form-control" required>
					</div>
					<div class="mb-3">
				  		<label for="" class="form-label">contents</label>
				  		<div id="editor"></div>
						<textarea style="display:none;" name="contents" class="form-control" id="contents" rows="5" required></textarea>
				  	</div>
					<div class="d-flex justify-content-end mb-4">
				  		<button type="button" id="save" class="btn btn-primary">Submit</button>
				  	</div>
				</form>
                <!-- Divider-->
                <hr class="my-4" />

            </div>
        </div>
        <!-- Footer-->
        <th:block th:replace="fragments/footer"></th:block>
        <script src="/js/imageupload.js"></script>
        <script>
        	let imageUrl;
        	const Editor = toastui.Editor;

        	const editor = new Editor({
        	  el: document.querySelector('#editor'),
        	  height: '600px',
        	  initialEditType: 'wysiwyg',
        	  previewStyle: 'wysiwyg',
        	  hooks: {
        		  addImageBlobHook: (blob, callback) => {
        			var dataImageUrl = imageUpload(blob, callback);
        		}
        	  }
        	});
        	
        	document.querySelector('#save').addEventListener('click',function(){
        		let title = document.querySelector('#title');
        		let contents = document.querySelector('#contents');
        		const form = document.querySelector('#form');
        		contents.value = editor.getHTML();
        		form.submit();
        	})
        	
        </script>
    </body>
</html>
